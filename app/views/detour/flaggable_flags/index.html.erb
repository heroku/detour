<h1><%= flaggable_type.capitalize %> <%= flag_verb %> <%= feature_name %></h1>

<% if @feature.errors.any? %>
  <ul>
    <% @feature.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
  </ul>
<% end %>

<%= form_for @feature, url: request.path do |form| %>
  <%= form.fields_for "#{flag_type}_flags", @feature.send("#{flag_type}_flags").where(flaggable_type: flaggable_class) do |flaggable_flag_form| %>
    <%= render "flaggable_flag_fields", f: flaggable_flag_form %>
  <% end %>

  <%= link_to_add_fields "Add #{flag_noun.capitalize}", form, "#{flag_type}_flags", :flaggable_flag_fields %>

  <hr>

  <%= form.submit "Update #{flag_noun.capitalize.pluralize}", class: "btn btn-primary pull-left" %>
<% end %>
